{"ast":null,"code":"import Web3 from 'web3';\nconst contractAbi = require(\"./contractABI.json\");\nexport let selectedaccount;\nlet contract;\nlet isInitialzed = false;\nexport const init = async () => {\n  const contractAdrees = \"0x5C7FAf8b21ab2afEeFc7327f910eE560750949c2\";\n  let provider = window.ethereum;\n  if (typeof provider !== 'undefined') {\n    provider.request({\n      method: 'eth_requestAccounts'\n    }).then(accounts => {\n      selectedaccount = accounts[0];\n    }).catch(err => {\n      console.log(err);\n      return;\n    });\n    window.ethereum.on('accountsChanged', function (accounts) {\n      selectedaccount = accounts[0];\n    });\n  }\n  const web3 = new Web3(provider);\n  contract = new web3.eth.Contract(contractAbi, contractAdrees);\n  isInitialzed = false;\n};\nexport const executeTransaction = async function (fnName) {\n  if (!isInitialzed) {\n    await init();\n  }\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  contract.methods[fnName](...args).send({\n    from: selectedaccount\n  });\n};\nexport const call = async function (fnName) {\n  if (!isInitialzed) {\n    await init();\n  }\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return contract.methods[fnName](...args).call({\n    from: selectedaccount\n  });\n};","map":{"version":3,"names":["Web3","contractAbi","require","selectedaccount","contract","isInitialzed","init","contractAdrees","provider","window","ethereum","request","method","then","accounts","catch","err","console","log","on","web3","eth","Contract","executeTransaction","fnName","args","methods","send","from","call"],"sources":["C:/Users/wailb/OneDrive/Documents/GitHub/Blockchain-Polls/blockchainpollsFrontend/src/Blockchain/web3Client.js"],"sourcesContent":["import Web3 from 'web3';\r\n\r\nconst contractAbi = require(\"./contractABI.json\");\r\n\r\nexport let  selectedaccount;\r\nlet contract;\r\nlet isInitialzed = false;\r\n\r\nexport const init = async () => {\r\n\r\n    const contractAdrees = \"0x5C7FAf8b21ab2afEeFc7327f910eE560750949c2\";\r\n    \r\n\r\n    let provider = window.ethereum;\r\n\r\n    if(typeof provider !== 'undefined'){\r\n      provider.request({method: 'eth_requestAccounts'}).then((accounts) => {selectedaccount = accounts[0]}).catch((err) => {console.log(err); return;});\r\n      window.ethereum.on('accountsChanged', function(accounts){\r\n        selectedaccount =  accounts[0];\r\n   })\r\n    }\r\n    \r\n    const web3 = new Web3(provider);\r\n    contract = new web3.eth.Contract(contractAbi, contractAdrees);\r\n\r\n    isInitialzed = false;\r\n    \r\n}\r\n\r\n\r\n\r\nexport const executeTransaction = async (fnName, ...args) => {\r\n\r\n  if(!isInitialzed){\r\n    await init();\r\n  }\r\n  contract.methods[fnName](...args).send({ from: selectedaccount})\r\n\r\n}\r\n\r\n\r\nexport const call = async (fnName, ...args) => {\r\n\r\n  if(!isInitialzed){\r\n    await init();\r\n  }\r\n  return contract.methods[fnName](...args).call({ from: selectedaccount})\r\n}\r\n\r\n\r\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,MAAM;AAEvB,MAAMC,WAAW,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAEjD,OAAO,IAAKC,eAAe;AAC3B,IAAIC,QAAQ;AACZ,IAAIC,YAAY,GAAG,KAAK;AAExB,OAAO,MAAMC,IAAI,GAAG,YAAY;EAE5B,MAAMC,cAAc,GAAG,4CAA4C;EAGnE,IAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAQ;EAE9B,IAAG,OAAOF,QAAQ,KAAK,WAAW,EAAC;IACjCA,QAAQ,CAACG,OAAO,CAAC;MAACC,MAAM,EAAE;IAAqB,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;MAACX,eAAe,GAAGW,QAAQ,CAAC,CAAC,CAAC;IAAA,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;MAACC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAAE;IAAO,CAAC,CAAC;IACjJP,MAAM,CAACC,QAAQ,CAACS,EAAE,CAAC,iBAAiB,EAAE,UAASL,QAAQ,EAAC;MACtDX,eAAe,GAAIW,QAAQ,CAAC,CAAC,CAAC;IACnC,CAAC,CAAC;EACD;EAEA,MAAMM,IAAI,GAAG,IAAIpB,IAAI,CAACQ,QAAQ,CAAC;EAC/BJ,QAAQ,GAAG,IAAIgB,IAAI,CAACC,GAAG,CAACC,QAAQ,CAACrB,WAAW,EAAEM,cAAc,CAAC;EAE7DF,YAAY,GAAG,KAAK;AAExB,CAAC;AAID,OAAO,MAAMkB,kBAAkB,GAAG,gBAAOC,MAAM,EAAc;EAE3D,IAAG,CAACnB,YAAY,EAAC;IACf,MAAMC,IAAI,EAAE;EACd;EAAC,kCAJiDmB,IAAI;IAAJA,IAAI;EAAA;EAKtDrB,QAAQ,CAACsB,OAAO,CAACF,MAAM,CAAC,CAAC,GAAGC,IAAI,CAAC,CAACE,IAAI,CAAC;IAAEC,IAAI,EAAEzB;EAAe,CAAC,CAAC;AAElE,CAAC;AAGD,OAAO,MAAM0B,IAAI,GAAG,gBAAOL,MAAM,EAAc;EAE7C,IAAG,CAACnB,YAAY,EAAC;IACf,MAAMC,IAAI,EAAE;EACd;EAAC,mCAJmCmB,IAAI;IAAJA,IAAI;EAAA;EAKxC,OAAOrB,QAAQ,CAACsB,OAAO,CAACF,MAAM,CAAC,CAAC,GAAGC,IAAI,CAAC,CAACI,IAAI,CAAC;IAAED,IAAI,EAAEzB;EAAe,CAAC,CAAC;AACzE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}